{% extends "app/base.html" %}

{% block title %}
Registrar | Expresate con señas
{% endblock %}

{% block content %}
<div class="container mx-auto p-4">
    <div class="max-w-4xl mx-auto">
        <!-- Encabezado -->
        
    <!--formulario de registro usuarios-->
        <div class="container mx-auto p-4">
            <div class="max-w-4xl mx-auto">
                <!-- Encabezado -->
                <div class="text-center mb-8">
                    <div class="inline-block rounded-lg bg-cyan-100 px-3 py-1 text-xl text-cyan-800 font-medium mb-3">
                        REGISTRARTE
                    </div>
                    <h1 class="text-3xl md:text-4xl font-bold mb-2">Comienza tu viaje hacia el bienestar</h1>
                    <p class="text-gray-600">Crea tu cuenta y personaliza tu experiencia</p>
                </div>
        
                <!-- Formulario de registro -->
                <div class="grid grid-cols-1 md:grid-cols-5 gap-6">
                    <!-- Columna izquierda con imagen de fondo - ocupa 2 de 5 columnas -->
                    <div class="md:col-span-2 bg-slate-800 text-white rounded-lg overflow-hidden relative shadow-xl">
                        <div class="absolute inset-0 w-full h-full">
                            <img 
                                src="https://cdn.pixabay.com/photo/2018/03/05/15/45/nature-3201015_1280.jpg" 
                                alt="Persona haciendo ejercicio"
                                class="w-full h-full object-cover opacity-40"
                            />
                        </div>
                        <div class="relative p-6 md:p-8 space-y-4">
                            <div class="text-sm font-semibold text-cyan-400">BENEFICIOS DE REGISTRARTE</div>
                            <h2 class="text-2xl md:text-3xl font-bold">
                                Tu camino personalizado hacia el bienestar
                            </h2>
                            <ul class="space-y-4 mt-6">
                                <li class="flex items-start">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-cyan-400 mr-2 mt-0.5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                                    </svg>
                                    <span>Programas adaptados a tus necesidades específicas</span>
                                </li>
                                <li class="flex items-start">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-cyan-400 mr-2 mt-0.5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                                    </svg>
                                    <span>Seguimiento de tu progreso con estadísticas personalizadas</span>
                                </li>
                                <li class="flex items-start">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-cyan-400 mr-2 mt-0.5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                                    </svg>
                                    <span>Acceso a nuestra comunidad de apoyo y recursos exclusivos</span>
                                </li>
                                <li class="flex items-start">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-cyan-400 mr-2 mt-0.5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                                    </svg>
                                    <span>Asesoramiento personalizado de nuestros expertos</span>
                                </li>
                            </ul>
                        </div>
                    </div>
        
                    <!-- Columna derecha con formulario - ocupa 3 de 5 columnas -->
                    <div class="md:col-span-3 bg-white rounded-lg p-6 md:p-8 shadow-lg">
                        <form method="post" action="" x-data="registrationForm()">
                            {% csrf_token %}
                            
                            {% if messages %}
                                {% for message in messages %}
                                    <div class="mb-4 p-4 rounded-md {% if message.tags == 'success' %}bg-green-100 text-green-700{% else %}bg-red-100 text-red-700{% endif %}">
                                        {{ message }}
                                    </div>
                                {% endfor %}
                            {% endif %}
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                                <!-- Nombres -->
                                <div>
                                    <label for="first_name" class="block text-sm font-medium text-gray-700 mb-1">Nombres</label>
                                    <input 
                                        type="text" 
                                        id="first_name" 
                                        name="first_name" 
                                        class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-cyan-500 focus:border-transparent"
                                        placeholder="Tus nombres"
                                        x-model="formData.first_name"
                                        required
                                    >
                                    <div x-show="errors.first_name" class="text-red-500 text-xs mt-1" x-text="errors.first_name"></div>
                                </div>
                                
                                <!-- Apellidos -->
                                <div>
                                    <label for="last_name" class="block text-sm font-medium text-gray-700 mb-1">Apellidos</label>
                                    <input 
                                        type="text" 
                                        id="last_name" 
                                        name="last_name" 
                                        class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-cyan-500 focus:border-transparent"
                                        placeholder="Tus apellidos"
                                        x-model="formData.last_name"
                                        required
                                    >
                                    <div x-show="errors.last_name" class="text-red-500 text-xs mt-1" x-text="errors.last_name"></div>
                                </div>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                                <!-- Nombre de usuario -->
                                <div>
                                    <label for="username" class="block text-sm font-medium text-gray-700 mb-1">Nombre de usuario</label>
                                    <input 
                                        type="text" 
                                        id="username" 
                                        name="username" 
                                        class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-cyan-500 focus:border-transparent"
                                        placeholder="Elige un nombre de usuario"
                                        x-model="formData.username"
                                        required
                                    >
                                    <div x-show="errors.username" class="text-red-500 text-xs mt-1" x-text="errors.username"></div>
                                </div>
                                
                                <!-- Email -->
                                <div>
                                    <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Correo electrónico</label>
                                    <input 
                                        type="email" 
                                        id="email" 
                                        name="email" 
                                        class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-cyan-500 focus:border-transparent"
                                        placeholder="tu@email.com"
                                        x-model="formData.email"
                                        required
                                    >
                                    <div x-show="errors.email" class="text-red-500 text-xs mt-1" x-text="errors.email"></div>
                                </div>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                                <!-- Contraseña -->
                                <div>
                                    <label for="password" class="block text-sm font-medium text-gray-700 mb-1">Contraseña</label>
                                    <input 
                                        type="password" 
                                        id="password" 
                                        name="password" 
                                        class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-cyan-500 focus:border-transparent"
                                        placeholder="Crea una contraseña segura"
                                        x-model="formData.password"
                                        required
                                    >
                                    <div x-show="errors.password" class="text-red-500 text-xs mt-1" x-text="errors.password"></div>
                                </div>
                                
                                <!-- Confirmar contraseña -->
                                <div>
                                    <label for="password_confirm" class="block text-sm font-medium text-gray-700 mb-1">Confirmar contraseña</label>
                                    <input 
                                        type="password" 
                                        id="password_confirm" 
                                        name="password_confirm" 
                                        class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-cyan-500 focus:border-transparent"
                                        placeholder="Repite tu contraseña"
                                        x-model="formData.password_confirm"
                                        required
                                    >
                                    <div x-show="errors.password_confirm" class="text-red-500 text-xs mt-1" x-text="errors.password_confirm"></div>
                                </div>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                                <!-- Dispositivo de preferencia -->
                                <div>
                                    <label for="device" class="block text-sm font-medium text-gray-700 mb-1">Dispositivo de preferencia</label>
                                    <select 
                                        id="device" 
                                        name="device" 
                                        class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-cyan-500 focus:border-transparent"
                                        x-model="formData.device"
                                        required
                                    >
                                        <option value="">Selecciona un dispositivo</option>
                                        <option value="smartphone">Smartphone</option>
                                        <option value="tablet">Tablet</option>
                                        <option value="laptop">Laptop</option>
                                        <option value="desktop">Computadora de escritorio</option>
                                        <option value="other">Otro</option>
                                    </select>
                                    <div x-show="errors.device" class="text-red-500 text-xs mt-1" x-text="errors.device"></div>
                                </div>
                                
                                <!-- País -->
                                <div>
                                    <label for="country" class="block text-sm font-medium text-gray-700 mb-1">País</label>
                                    <select 
                                        id="country" 
                                        name="country" 
                                        class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-cyan-500 focus:border-transparent"
                                        x-model="formData.country"
                                        required
                                    >
                                        <option value="">Selecciona tu país</option>
                                        <option value="AR">Argentina</option>
                                        <option value="BO">Bolivia</option>
                                        <option value="CL">Chile</option>
                                        <option value="CO">Colombia</option>
                                        <option value="CR">Costa Rica</option>
                                        <option value="CU">Cuba</option>
                                        <option value="EC">Ecuador</option>
                                        <option value="SV">El Salvador</option>
                                        <option value="ES">España</option>
                                        <option value="GT">Guatemala</option>
                                        <option value="HN">Honduras</option>
                                        <option value="MX">México</option>
                                        <option value="NI">Nicaragua</option>
                                        <option value="PA">Panamá</option>
                                        <option value="PY">Paraguay</option>
                                        <option value="PE">Perú</option>
                                        <option value="PR">Puerto Rico</option>
                                        <option value="DO">República Dominicana</option>
                                        <option value="UY">Uruguay</option>
                                        <option value="VE">Venezuela</option>
                                        <option value="OT">Otro</option>
                                    </select>
                                    <div x-show="errors.country" class="text-red-500 text-xs mt-1" x-text="errors.country"></div>
                                </div>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                                <!-- Edad -->
                                <div>
                                    <label for="age" class="block text-sm font-medium text-gray-700 mb-1">Edad</label>
                                    <input 
                                        type="number" 
                                        id="age" 
                                        name="age" 
                                        min="18" 
                                        max="120" 
                                        class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-cyan-500 focus:border-transparent"
                                        placeholder="Tu edad"
                                        x-model="formData.age"
                                        required
                                    >
                                    <div x-show="errors.age" class="text-red-500 text-xs mt-1" x-text="errors.age"></div>
                                </div>
                                
                                <!-- Rol -->
                                <div>
                                    <label for="role" class="block text-sm font-medium text-gray-700 mb-1">Perfil/Rol</label>
                                    <select 
                                        id="role" 
                                        name="role" 
                                        class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-cyan-500 focus:border-transparent"
                                        x-model="formData.role"
                                        required
                                    >
                                        <option value="">Selecciona tu rol</option>
                                        <option value="student">Estudiante</option>
                                        <option value="teacher">Docente</option>
                                        <option value="university">Universitario</option>
                                        <option value="professional">Niño</option>
                                        <option value="professional">Solo Madre</option>
                                        <option value="professional">Solo Padre</option>
                                        <option value="other">Otro</option>
                                    </select>
                                    <div x-show="errors.role" class="text-red-500 text-xs mt-1" x-text="errors.role"></div>
                                </div>
                            </div>
                            
                            <div class="mb-6">
                                <div class="flex items-center">
                                    <input 
                                        type="checkbox" 
                                        id="terms" 
                                        name="terms" 
                                        class="h-4 w-4 text-cyan-600 focus:ring-cyan-500 border-gray-300 rounded"
                                        x-model="formData.terms"
                                        required
                                    >
                                    <label for="terms" class="ml-2 block text-sm text-gray-700">
                                        Acepto los <a href="#" class="text-cyan-600 hover:underline">términos y condiciones</a> y la <a href="#" class="text-cyan-600 hover:underline">política de privacidad</a>
                                    </label>
                                </div>
                                <div x-show="errors.terms" class="text-red-500 text-xs mt-1" x-text="errors.terms"></div>
                            </div>
                            
                            <div class="flex flex-col space-y-4">
                                <button 
                                    type="submit"
                                    x-on:click.prevent="submitForm"
                                    x-data="{ hover: false }"
                                    x-on:mouseenter="hover = true"
                                    x-on:mouseleave="hover = false"
                                    class="w-full bg-teal-500 hover:bg-teal-600 text-white font-medium px-6 py-3 rounded-md transition-transform duration-200"
                                    :class="{ 'scale-[1.02]': hover }"
                                >
                                    CREAR MI CUENTA
                                </button>
                                
                                <p class="text-center text-sm text-gray-600">
                                    ¿Ya tienes una cuenta? <a href="#" class="text-cyan-600 hover:underline">Inicia sesión aquí</a>
                                </p>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    function contactForm() {
        return {
            formData: {
                name: '',
                email: '',
                subject: '',
                message: '',
                privacy: false
            },
            errors: {},
            submitForm() {
                this.errors = {};
                let isValid = true;
                
                // Validación básica
                if (!this.formData.name.trim()) {
                    this.errors.name = 'Por favor ingresa tu nombre';
                    isValid = false;
                }
                
                if (!this.formData.email.trim()) {
                    this.errors.email = 'Por favor ingresa tu correo electrónico';
                    isValid = false;
                } else if (!this.validateEmail(this.formData.email)) {
                    this.errors.email = 'Por favor ingresa un correo electrónico válido';
                    isValid = false;
                }
                
                if (!this.formData.subject) {
                    this.errors.subject = 'Por favor selecciona un asunto';
                    isValid = false;
                }
                
                if (!this.formData.message.trim()) {
                    this.errors.message = 'Por favor ingresa tu mensaje';
                    isValid = false;
                }
                
                if (!this.formData.privacy) {
                    this.errors.privacy = 'Debes aceptar la política de privacidad';
                    isValid = false;
                }
                
                if (isValid) {
                    // Enviar el formulario
                    document.querySelector('form').submit();
                }
            },
            validateEmail(email) {
                const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                return re.test(email);
            }
        }
    }
</script>
{% endblock %}